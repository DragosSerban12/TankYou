{% extends "base.html" %}

{% block title %}Panel General{% endblock %}

{% block content %}

<h2 class="mb-4">Panel de pruebas (vista general)</h2>

<!--  FILTRO  -->
<form method="get" class="row g-3 align-items-end mb-4">
    <div class="col-md-4">
        <label class="form-label">Filtrar por letra inicial</label>
        <input type="text"
               name="letras"
               class="form-control"
               placeholder="Ej: ela"
               value="{{ request.GET.letras }}">
    </div>

    <div class="col-md-2">
        <div class="form-check mt-4">
            <input class="form-check-input"
                   type="checkbox"
                   name="marcado"
                   value="True"
                   {% if marcado == "True" %}checked{% endif %}>
            <label class="form-check-label">
                Marcar
            </label>
        </div>
    </div>

    <div class="col-md-2">
        <button type="submit" class="btn btn-primary w-100">
            Filtrar
        </button>
    </div>
</form>

<hr>

<!--  USUARIOS -->
<h3> Usuarios</h3>
{% for usuario in usuarios %}
    <p>
        {{ usuario.nombre }} {{ usuario.apellidos }} —
        <strong>{{ usuario.email }}</strong>
    </p>
{% empty %}
    <p class="text-muted">No hay usuarios</p>
{% endfor %}

<hr>

<!--  VEHÍCULOS  -->
<h3> Vehículos</h3>
{% for vehiculo in vehiculos %}
    <p>
        {{ vehiculo.marca }} {{ vehiculo.modelo }}
        ({{ vehiculo.matricula }}) —
        Dueño: {{ vehiculo.usuario.nombre }} {{ vehiculo.usuario.apellidos }} —
        Año: {{ vehiculo.anyo_compra }}
    </p>
{% empty %}
    <p class="text-muted">No hay vehículos</p>
{% endfor %}

<hr>

<!--  PEDIDOS  -->
<h3> Pedidos</h3>
{% for pedido in pedidos %}
    <p>
        Pedido #{{ pedido.id }} —
        Usuario: {{ pedido.usuario.nombre }} {{ pedido.usuario.apellidos }} —
        Vehículo: {{ pedido.vehiculo.marca }} {{ pedido.vehiculo.modelo }} —
        Fecha: {{ pedido.fecha_pedido }} —
        Estado: <strong>{{ pedido.estado }}</strong>
    </p>
{% empty %}
    <p class="text-muted">No hay pedidos</p>
{% endfor %}

<hr>

<!--  PAGOS  -->
<h3> Pagos</h3>
{% for pago in pagos %}
    <p>
        Pago #{{ pago.id }} —
        Pedido: {{ pago.pedido.id }} —
        Método: {{ pago.metodo_pago }} —
        Importe: {{ pago.importe }} € —
        Estado: {{ pago.estado_pago }}
    </p>
{% empty %}
    <p class="text-muted">No hay pagos</p>
{% endfor %}

<hr>

<!--  REEMBOLSOS  -->
<h3> Reembolsos</h3>
{% for r in reembolsos %}
    <p>
        Reembolso #{{ r.id }} —
        Pago: {{ r.pago.id }} —
        Estado: {{ r.estado }} —
        Motivo: {{ r.motivo }}
    </p>
{% empty %}
    <p class="text-muted">No hay reembolsos</p>
{% endfor %}

<hr>

<!--  RECARGAS  -->
<h3> Recargas</h3>
{% for recarga in recargas %}
    <p>
        {{ recarga.get_tipo_combustible_display }} —
        {{ recarga.precio_por_litro }} €/L —
        Activa: {{ recarga.activo }}
    </p>
{% empty %}
    <p class="text-muted">No hay recargas</p>
{% endfor %}

<hr>

<!--  NOTIFICACIONES  -->
<h3> Notificaciones</h3>
{% for noti in notificaciones %}
    <p>
        Notificación #{{ noti.id }} —
        Usuario: {{ noti.usuario.nombre }} {{ noti.usuario.apellidos }} —
        Pedido:
        {% if noti.pedido %}
            {{ noti.pedido.id }}
        {% else %}
            Ninguno
        {% endif %}
        —
        Tipo: {{ noti.tipo }} —
        Mensaje: {{ noti.mensaje }}
    </p>
{% empty %}
    <p class="text-muted">No hay notificaciones</p>
{% endfor %}

{% endblock %}
